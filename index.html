<!DOCTYPE html>
<html lang="hr">
<head>
  <link rel="icon" type="image/png" href="icon.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wordle Hrvatski</title>
  <style>
    * { box-sizing:border-box; margin:0; padding:0; }
    body {
      background:#000; color:#fff;
      font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display:flex; flex-direction:column; align-items:center;
      min-height:100vh; padding:20px;
    }
    h1 {
      font-size:2.5rem; margin-bottom:10px; text-align:center;
      display:flex; align-items:center; gap:10px;
    }
    .grid {
      display:grid; grid-template-rows:repeat(6,1fr);
      grid-gap:5px; margin-bottom:20px;
    }
    .row {
      display:grid; grid-template-columns:repeat(5,60px);
      grid-gap:5px;
    }
    .tile {
      width:60px; height:60px; background:#222;
      border:2px solid #333; display:flex;
      align-items:center; justify-content:center;
      font-size:2rem; text-transform:uppercase;
      backface-visibility:hidden; transform-style:preserve-3d;
    }
    .flip { animation:flip 0.6s forwards; }
    @keyframes flip {
      0%   { transform:rotateX(0); }
      50%  { transform:rotateX(90deg); }
      100% { transform:rotateX(0); }
    }
    .correct { background:#538d4e; border-color:#538d4e; color:#000; }
    .present { background:#b59f3b; border-color:#b59f3b; color:#000; }
    .absent  { background:#3a3a3c; border-color:#3a3a3c; color:#fff; }

    #controls { margin-bottom:10px; }
    input {
      padding:10px; font-size:1rem; width:200px;
      text-transform:lowercase;
    }
    button {
      padding:10px 20px; font-size:1rem; margin-left:10px;
      background:#538d4e; border:none; border-radius:4px;
      color:#000; cursor:pointer;
    }
    button:disabled {
      background:#555; color:#222; cursor:not-allowed;
    }
    #keyboard {
      margin-top:20px;
      display:flex; flex-direction:column; gap:8px;
      user-select:none;
    }
    .key-row {
      display:flex; justify-content:center; gap:6px;
    }
    .key {
      padding:12px;
      min-width: 30px;
      background:#444;
      border:none;
      border-radius:4px;
      color:#fff;
      font-size:0.9rem;
      cursor:pointer;
    }
    .key.wide { min-width: 50px; }
    .key.correct { background:#538d4e; color:#000; }
    .key.present { background:#b59f3b; color:#000; }
    .key.absent  { background:#3a3a3c; color:#fff; }

    #reveal-word {
      margin-top:10px; font-size:1rem; color:#ff5555;
    }
    #correct-count {
      margin-top:20px; background:#538d4e; color:#000;
      padding:10px 20px; border-radius:6px;
      font-size:1.2rem; font-weight:bold; text-align:center;
    }
    #not-in-list {
      margin-top:10px; font-size:1rem; color:#ff5555;
    }
  </style>
</head>
<body>

  <h1>
    <img src="icon.png" alt="Logo" width="32" height="32">
    Wordle
  </h1>

  <div class="grid" id="grid"></div>

  <div id="controls">
    <input type="text" id="guess" maxlength="5" />
    <button id="goBtn">Pogodi</button>
    <button id="nextBtn" style="display:none;">Sljedeća riječ</button>
  </div>

  <div id="not-in-list"></div>
  <div id="reveal-word"></div>
  <div id="correct-count">Pogodio si 0 riječi</div>

  <!-- On-screen tipkovnica -->
  <div id="keyboard">
    <div class="key-row" id="row1"></div>
    <div class="key-row" id="row2"></div>
    <div class="key-row" id="row3"></div>
  </div>

  <script>
    const rijeci = [
      "olovo", "mačke", "kamen", "glava", "polje", "crven", "plava", "zvono", "zebra", "bravo",
      "lampa", "majka", "mozak", "ulica", "vrije", "zmije", "papir", "patka", "ulica", "noćas",
      "zlato","hrast","ponoć","kazna","rebro","poker","čipka","ljeto","gotov","sudac","fosil",
      "nokat","igrač","crkva","matko","cesta","tigar","lopta","život","torba","istra","drava",
      "hrvat","rukav","grana","breza","blago","basna","boris","litva","limun","lagan","lapud",
      "farma","fokus","filip","marko","fanta","frape","farba","ulazi","uspon","ukras","ustav",
      "mozak","tuzla","pegla","oblak","lonac","dunav","malta","japan","karlo","vesna","radit",
      "kutak","duzni","vrpca","ćevap","oprez","dioba","remen","paket","kukac","otkup","mrtvi",
      "doziv","teror","oslon","uskrs","božić","oglas","uglas","solin","tajna","ručka","narav",
      "netko","liker","crnac","papak","papir","omlet","zadar","obala","hvala","riječ","slovo",
      "slova","volim","volit","bosna","vatra","ormar","josip","tovar","jelen","pariz","paris",
      "jedan","sedam","mekan","žedan","imena","mokar","borba","radar","split","novac","labud",
      "mrkva","dobar","mačka","nitko","iskra","sisak","momci","momak","zidar","reket","rakun",
      "roman","runda","radio","ručak","ragbi","nisko","nepal","nisam","nered","nemam","namaz",
      "lopov","gulaš","galeb","ocean","oklop","pegla","palac","panda","petak","pizza","palma",
      "bakar","kakav","takav","slova","upiši","goran","tenis","nisam","kralj","zelen","malen",
      "nekad","moram","zoran","devet","frend","slang","super","ugled","sunce","melem","banka",
      "nikad","zidam","zapad","moler","izlaz","šesto","miris","molim"
    ];

    let correctCount = 0, attempts = 0, secret = "";
    const grid       = document.getElementById("grid"),
          guessEl    = document.getElementById("guess"),
          goBtn      = document.getElementById("goBtn"),
          nextBtn    = document.getElementById("nextBtn"),
          revealDiv  = document.getElementById("reveal-word"),
          countDiv   = document.getElementById("correct-count"),
          notListDiv = document.getElementById("not-in-list");

    // Keyboard layout
    const layout = [
      ['Q','W','E','R','T','Y','U','I','O','P'],
      ['A','S','D','F','G','H','J','K','L'],
      ['Enter','Z','X','C','V','B','N','M','←']
    ];

    // Initialize on-screen keyboard
    function initKeyboard() {
      layout.forEach((row, i) => {
        const rowEl = document.getElementById('row'+(i+1));
        row.forEach(key => {
          const btn = document.createElement('button');
          btn.textContent = key;
          btn.className = 'key' + (key.length>1?' wide':'');
          btn.addEventListener('click', () => handleKey(key));
          rowEl.appendChild(btn);
        });
      });
    }

    function handleKey(key) {
      if (goBtn.disabled) return;
      if (key === 'Enter') {
        goBtn.click();
      } else if (key === '←') {
        guessEl.value = guessEl.value.slice(0, -1);
      } else {
        if (guessEl.value.length < 5) {
          guessEl.value += key.toLowerCase();
        }
      }
      guessEl.focus();
    }

    function getRandomWord() {
      return rijeci[Math.floor(Math.random() * rijeci.length)];
    }

    function initGrid() {
      grid.innerHTML = "";
      for (let r = 0; r < 6; r++) {
        const row = document.createElement("div");
        row.className = "row";
        for (let c = 0; c < 5; c++) {
          const tile = document.createElement("div");
          tile.className = "tile";
          row.appendChild(tile);
        }
        grid.appendChild(row);
      }
    }

    function startGame() {
      secret = getRandomWord();
      attempts = 0;
      revealDiv.textContent = "";
      notListDiv.textContent = "";
      initGrid();
      guessEl.value = "";
      guessEl.disabled = goBtn.disabled = false;
      nextBtn.style.display = "none";
      guessEl.focus();
    }

    function revealRow(rowEl, guess) {
      const letters = secret.split("");
      for (let i = 0; i < 5; i++) {
        const tile = rowEl.children[i];
        tile.textContent = guess[i];
        tile.classList.add("flip");
        setTimeout(() => {
          const state = 
            guess[i] === letters[i] ? 'correct' :
            letters.includes(guess[i]) ? 'present' :
            'absent';
          tile.classList.add(state);
          // also color the on-screen key
          document.querySelectorAll('.key').forEach(k => {
            if (k.textContent.toLowerCase() === guess[i]) {
              k.classList.add(state);
            }
          });
        }, i * 300);
      }
    }

    function endGame(won) {
      guessEl.disabled = goBtn.disabled = true;
      if (!won) {
        revealDiv.textContent = `Riječ je bila: ${secret.toUpperCase()}`;
      } else {
        correctCount++;
        countDiv.textContent = `Pogodio si ${correctCount} riječi`;
      }
      nextBtn.style.display = "inline-block";
    }

    goBtn.addEventListener("click", () => {
      notListDiv.textContent = "";
      const val = guessEl.value.toLowerCase().trim();
      if (val.length !== 5) {
        alert("Unesite točno 5 slova!");
        return;
      }
      if (!rijeci.includes(val)) {
        notListDiv.textContent = "Riječ nije na popisu";
        return;
      }
      const rowEl = grid.children[attempts];
      revealRow(rowEl, val);
      attempts++;
      guessEl.value = "";
      if (val === secret) endGame(true);
      else if (attempts === 6) endGame(false);
    });

    // ENTER/backspace s fizičke tipkovnice
    guessEl.addEventListener("keydown", e => {
      if (e.key === "Enter" && !goBtn.disabled) goBtn.click();
      if (e.key === "Backspace") return; // default
    });

    nextBtn.addEventListener("click", startGame);

    // start
    initKeyboard();
    countDiv.textContent = `Pogodio si ${correctCount} riječi`;
    startGame();
  </script>

</body>
</html>





